import{s as U,e as x,c as ee,b as te,f as K,p as $,i as ae,n as H,k as ie,o as ne,r as se}from"../chunks/scheduler.CXKcC1Bb.js";import{S as V,i as Q,b as oe,d as re,m as le,a as ce,t as fe,e as de}from"../chunks/index.BDOlXbdZ.js";import{p as J,A as _,P as Y,C as ue,K as me}from"../chunks/profileConfig.CLnNeP_T.js";function he(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Z={exports:{}};(function(i){(function(){function t(c,p){document.addEventListener?c.addEventListener("scroll",p,!1):c.attachEvent("scroll",p)}function n(c){document.body?c():document.addEventListener?document.addEventListener("DOMContentLoaded",function p(){document.removeEventListener("DOMContentLoaded",p),c()}):document.attachEvent("onreadystatechange",function p(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",p),c())})}function e(c){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(c)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function l(c,p){c.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+p+";"}function g(c){var p=c.g.offsetWidth,m=p+100;return c.j.style.width=m+"px",c.i.scrollLeft=m,c.h.scrollLeft=c.h.scrollWidth+100,c.l!==p?(c.l=p,!0):!1}function d(c,p){function m(){var A=B;g(A)&&A.g.parentNode!==null&&p(A.l)}var B=c;t(c.h,m),t(c.i,m),g(c)}function C(c,p,m){p=p||{},m=m||window,this.family=c,this.style=p.style||"normal",this.weight=p.weight||"normal",this.stretch=p.stretch||"normal",this.context=m}var b=null,P=null,D=null,O=null;function j(c){return P===null&&(T(c)&&/Apple/.test(window.navigator.vendor)?(c=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),P=!!c&&603>parseInt(c[1],10)):P=!1),P}function T(c){return O===null&&(O=!!c.document.fonts),O}function M(c,p){var m=c.style,B=c.weight;if(D===null){var A=document.createElement("div");try{A.style.font="condensed 100px sans-serif"}catch{}D=A.style.font!==""}return[m,B,D?c.stretch:"","100px",p].join(" ")}C.prototype.load=function(c,p){var m=this,B=c||"BESbswy",A=0,a=p||3e3,u=new Date().getTime();return new Promise(function(r,f){if(T(m.context)&&!j(m.context)){var s=new Promise(function(o,E){function y(){new Date().getTime()-u>=a?E(Error(""+a+"ms timeout exceeded")):m.context.document.fonts.load(M(m,'"'+m.family+'"'),B).then(function(L){1<=L.length?o():setTimeout(y,25)},E)}y()}),h=new Promise(function(o,E){A=setTimeout(function(){E(Error(""+a+"ms timeout exceeded"))},a)});Promise.race([h,s]).then(function(){clearTimeout(A),r(m)},f)}else n(function(){function o(){var k;(k=w!=-1&&S!=-1||w!=-1&&W!=-1||S!=-1&&W!=-1)&&((k=w!=S&&w!=W&&S!=W)||(b===null&&(k=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),b=!!k&&(536>parseInt(k[1],10)||parseInt(k[1],10)===536&&11>=parseInt(k[2],10))),k=b&&(w==G&&S==G&&W==G||w==R&&S==R&&W==R||w==X&&S==X&&W==X)),k=!k),k&&(z.parentNode!==null&&z.parentNode.removeChild(z),clearTimeout(A),r(m))}function E(){if(new Date().getTime()-u>=a)z.parentNode!==null&&z.parentNode.removeChild(z),f(Error(""+a+"ms timeout exceeded"));else{var k=m.context.document.hidden;(k===!0||k===void 0)&&(w=y.g.offsetWidth,S=L.g.offsetWidth,W=v.g.offsetWidth,o()),A=setTimeout(E,50)}}var y=new e(B),L=new e(B),v=new e(B),w=-1,S=-1,W=-1,G=-1,R=-1,X=-1,z=document.createElement("div");z.dir="ltr",l(y,M(m,"sans-serif")),l(L,M(m,"serif")),l(v,M(m,"monospace")),z.appendChild(y.g),z.appendChild(L.g),z.appendChild(v.g),m.context.document.body.appendChild(z),G=y.g.offsetWidth,R=L.g.offsetWidth,X=v.g.offsetWidth,E(),d(y,function(k){w=k,o()}),l(y,M(m,'"'+m.family+'",sans-serif')),d(L,function(k){S=k,o()}),l(L,M(m,'"'+m.family+'",serif')),d(v,function(k){W=k,o()}),l(v,M(m,'"'+m.family+'",monospace'))})})},i.exports=C})()})(Z);var we=Z.exports;const pe=he(we);function ge(i){let t;return{c(){t=x("canvas"),this.h()},l(n){t=ee(n,"CANVAS",{width:!0,height:!0}),te(t).forEach(K),this.h()},h(){$(t,"width",i[0]),$(t,"height",i[1])},m(n,e){ae(n,t,e),i[4](t)},p(n,[e]){e&1&&$(t,"width",n[0]),e&2&&$(t,"height",n[1])},i:H,o:H,d(n){n&&K(t),i[4](null)}}}function I(i){return new Promise((t,n)=>{const e=new Image;e.onload=()=>t(e),e.onerror=n,e.src=i})}async function F(i,t,n,e,l,g){await i.decode(),g.drawImage(i,t,n,e,l)}async function be(i,t,n,e,l,g,d){await i.decode(),d.save(),d.clearRect(0,0,0,0),d.beginPath(),d.arc(t+g,n+g,g,0,Math.PI*2),d.closePath(),d.clip(),d.drawImage(i,t,n,e,l),d.restore()}async function q(i,t,n,e,l,g){g.fillStyle=l,g.fillRect(i,t,n,e)}async function N(i,t,n,e,l,g,d){d.beginPath(),d.moveTo(i,t+l),d.arcTo(i,t,i+l,t,l),d.lineTo(i+n-l,t),d.arcTo(i+n,t,i+n,t+l,l),d.lineTo(i+n,t+e-l),d.arcTo(i+n,t+e,i+n-l,t+e,l),d.lineTo(i+l,t+e),d.arcTo(i,t+e,i,t+e-l,l),d.closePath(),d.fillStyle=g,d.fill()}async function ye(i,t){let n=19,e=164;(t>12||t<0)&&(t=12);for(let l=1;l<=t;l++){const g=await I(`/profile_assets/user/cards/${l}.webp`);F(g,n,e,107,150,i),n+=121,n>730&&(n=19,e+=155)}}async function ve(i,t=!1,n=!1,e=.75,l=!1){let g=l?407:16,d=184;n&&await N(g-3,d-3,331,275,8,`rgba(0, 0, 0, ${e})`,i);const C=g+(t?6:12),b=t?160:104,P=t?152:93,D=t?215:131;let O=d+(t?26:2),j=C;for(let T=1;T<=(t?2:6);T++){const M=await I(`/profile_assets/user/cards/${T}.webp`);F(M,j,O,P,D,i),j+=b,j>b*2+C&&(j=C,O+=135)}}async function ke(i,t=!1,n=.75,e=!0,l=!0,g=!1){let d=g?407:16,C=184;if(e){t&&await N(d-3,C-3,331,128,8,`rgba(0, 0, 0, ${n})`,i);const b=await I("/profile_assets/user/statsAnimePlaceholder.png");F(b,d,C,325,122,i),C+=147}if(l){t&&await N(d-3,C-3,331,128,8,`rgba(0, 0, 0, ${n})`,i);const b=await I("/profile_assets/user/statsMangaPlaceholder.png");F(b,d,C,325,122,i)}}function _e(i,t,n){let e;ie(i,J,a=>n(6,e=a));let{width:l=750}=t,{height:g=500}=t,{background:d="#313338"}=t,C,b;async function P(a,u,r,f,s="#a7a7a7",h=16,o="Lato",E="",y=400){await new pe(o,{weight:y}).load().then(()=>{f.fillStyle=s,f.font=`${E} ${h}px ${o}`,f.fillText(a,u,r)})}async function D(a,u,r){let f;a===_.Base&&u?f=await I(`/profile_assets/avatar_border/level/${u}.png`):f=await I(`/profile_assets/avatar_border/${a}.png`);let s={x:24,y:39};switch(a){case _.Bow:s={x:26,y:48};break;case _.Dzedai:s={x:23,y:38};break;case _.Water:s={x:35,y:58};break;case _.Base:s={x:43,y:59};break;case _.Crows:s={x:25,y:42};break;case _.Metal:s={x:49,y:65};break;case _.RedThinLeaves:s={x:30,y:44};break;case _.Skull:s={x:28,y:47};break;case _.Fire:s={x:45,y:60};break;case _.Promium:s={x:38,y:53};break;case _.Ice:s={x:44,y:61};break;case _.Gold:s={x:18,y:33};break;case _.Red:s={x:40,y:58};break;case _.Rainbow:s={x:44,y:60};break;case _.Pink:s={x:38,y:53};break;case _.Simple:s={x:36,y:53};break;default:s={x:24,y:39};break}F(f,s.x,s.y,f.width,f.height,r)}async function O(a,u,r,f,s,h,o,E=_.None,y=!1){const v=f+4,w=1,S=w*2;await a.decode();let W=E!==_.None;W&&(h=!0);let G=40;h?await N(u,r,v,v,G,"#3f3f3f",o):await q(u,r,v,v,"#3f3f3f",o),h?await N(u+w,r+w,f+S,f+S,G,s,o):await q(u+w,r+w,f+S,f+S,s,o),h?await be(a,u+2,r+2,f,f,G,o):await F(a,u+2,r+2,f,f,o),W&&D(E,y,o)}async function j(a,u,r,f,s){const h=u+4;let o=27;o+=a+h;const E=103,y=28;await P(r,o,E+(30-y)/2+y,s,"#a7a7a7",y,"Lato","bold");const L=16;await P(f,o,E+32+L,s,"#7f7f7f",L,"Lato")}async function T(a,u,r,f,s="100M"){const h=await I(`/profile_assets/${a}.png`);await F(h,u,r,16,16,f),await P(s,u+16+3.5,r+14,f)}async function M(a,u,r){T("mtop",a,u,r,"0"),T("mlvl",a+60,u,r,"999");let f=12239,s=16319;const h=14;await N(a+114,u+1,74,h,2,"#3f3f3f",r);let o=72*(f/s);await N(a+115,u+2,o,h-2,2,"#145DA0",r),await P(`${f} / ${s}`,a+115+3,u+9+3,r,"#FFFFFF",10,"Lato","bold")}async function c(a,u,r,f=.7){await N(25,a?-16:476,700,40,8,`rgba(0, 0, 0, ${u?f:"0.75"})`,r);const s=a?3:480;M(32,s,r);const h=84;let o=227-h;T("mmsg",o+=h,s,r),T("msc",o+=h,s,r),T("mtc",o+=h,s,r),T("mac",o+=h,s,r),T("mct",o+=h,s,r),T("mpc",o+=h,s,r)}async function p(a,u=!1,r=.75,f=!1,s=me.Angel){let h=f?16:368,o=184;u&&await N(h-3,o-3,370,275,8,`rgba(0, 0, 0, ${r})`,a);const E=await I("/profile_assets/user/cards/1.webp");await F(E,h+10,o+4,185,260,a);const y="#a7a7a7";let L=60,v=h+213,w=o+18;await P("Posiadane",v,w+8-10,a,"#7f7f7f",9,"Lato","bold"),await P("Limit",v+L,w+8-10,a,"#7f7f7f",9,"Lato","bold"),await P("20691",v,w+15,a,y,16,"Lato","bold"),await P("99999",v+L,w+15,a,y,16,"Lato","bold");const S=await I(`/profile_assets/${s}.png`);F(S,h+330,w-6,22,21,a),w+=29;let W=38,G=24;for(const X of Object.values(ue)){const z=await I(`/profile_assets/r${X}.png`);F(z,v,w,33,20,a),P(`${Math.abs((w-257)*36)}`,v+W,w+16,a,y,17,"Lato","bold"),w+=G}w=o+246;const R=84;await T("mscal",v,w,a,"99"),await T("mbor",v+R,w,a,"10")}async function m(a,u,r,f=!1){switch(a){case Y.Cards:await ye(r,e.cardsAmount);break;case Y.MiniGallery:case Y.ShowCards:e.miniGallery&&await ve(r,e.isSmall,!0,u,f),e.cardsStats&&await p(r,!0,u,f,e.karma);break;case Y.Stats:await ke(r,!0,u,e.animeStats,e.mangaStats,e.flip);break;case Y.Img:}}async function B(){await q(0,0,l,g,d,b);const a=await I(e.background?e.background:"/profile_assets/pbg.png");await F(a,0,0,l,160,b);const u=await I("/profile_assets/pbase.png");if(await F(u,0,0,u.width,u.height,b),e.image){const o=await I(e.image);await F(o,0,160,750,340,b)}if(e.miniWaifu){const o=await I("/profile_assets/user/cards/1.webp");await N(618,30,93,127,8,"#00000050",b),await F(o,622,34,85,120,b)}await c(e.barTop,e.barOpacity,b,e.shadowsOpacity),await m(e.profileType,e.shadowsOpacity,b,e.flip);const r=52,f=68,s=80;if(await j(r,s,"Użytkownik","Testowy",b),e.overlay){const o=await I(e.overlay);await F(o,0,98,750,402,b)}const h=await I("/profile_assets/user/avatar.png");if(await O(h,r,f,s,e.avatarBorderColor,e.hasRoundAvatar,b,e.avatarBorder,e.levelBorder),e.premiumOverlay){const o=await I(e.premiumOverlay);await F(o,0,0,750,500,b)}}ne(()=>{b=C.getContext("2d"),J.subscribe(()=>{B()})});function A(a){se[a?"unshift":"push"](()=>{C=a,n(2,C)})}return i.$$set=a=>{"width"in a&&n(0,l=a.width),"height"in a&&n(1,g=a.height),"background"in a&&n(3,d=a.background)},[l,g,C,d,A]}class Ce extends V{constructor(t){super(),Q(this,t,_e,ge,U,{width:0,height:1,background:3})}}function Te(i){let t,n;return t=new Ce({}),{c(){oe(t.$$.fragment)},l(e){re(t.$$.fragment,e)},m(e,l){le(t,e,l),n=!0},p:H,i(e){n||(ce(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){de(t,e)}}}class Le extends V{constructor(t){super(),Q(this,t,null,Te,U,{})}}export{Le as component};
